var contentscript=window.lmoPosition={offset:0,top:0,left:0};function onPositionUpdate(a){var c=a.getBoundingClientRect();var b={type:"lmocspos",offset:c.y,top:contentscript.top+c.y,left:contentscript.left+c.x,};if(a.lmoLeft!=b.left||a.lmoTop!=b.top||a.lmoState=="interactive"){a.contentWindow!=null&&a.contentWindow.postMessage(b,"*");a.lmoLeft=b.left;a.lmoTop=b.top}}var wheelTimeout=null;function onWheel(){if(window!=window.top){chrome.runtime.sendMessage({lmocspos:"wheel"})}else{wheelTimeout!=null&&clearTimeout(wheelTimeout);wheelTimeout=setTimeout(function(){document.querySelectorAll("iframe").forEach(function(a){if(a.lmoState==="loaded"||a.lmoState==="interactive"){onPositionUpdate(a)}})},250)}}function onScroll(){document.querySelectorAll("iframe").forEach(function(a){if(a.lmoState==="loaded"||a.lmoState==="interactive"){onPositionUpdate(a)}})}function onMessage(a){if(typeof a.data==="object"&&a.data.type==="lmocspos"){contentscript.offset=a.data.offset;contentscript.top=a.data.top;contentscript.left=a.data.left;document.querySelectorAll("iframe").forEach(function(b){onPositionUpdate(b)})}}document.querySelectorAll("iframe").forEach(function(a){if(document.readyState==="complete"){a.lmoState="loaded";onPositionUpdate(a)}else{a.lmoState="interactive";a.addEventListener("load",function(){onPositionUpdate(this);a.lmoState="loaded"},true)}});setInterval(function(){document.querySelectorAll("iframe").forEach(function(a){if(typeof a.lmoState==="undefined"){a.lmoInteractive=0;a.lmoState="interactive";a.addEventListener("load",function(){onPositionUpdate(this);a.lmoState="loaded"},true)}else{if(a.lmoState==="interactive"){onPositionUpdate(a);if(++a.lmoInteractive>=10||document.readyState==="complete"){a.lmoState="loaded"}}else{if(a.lmoState==="loaded"){onPositionUpdate(a)}}}})},1000);window.addEventListener("scroll",onScroll);window.addEventListener("wheel",onWheel);window.addEventListener("message",onMessage);window.frameElement!=null&&window.frameElement.addEventListener("load",function(){window.removeEventListener("scroll",onScroll);window.removeEventListener("wheel",onWheel);window.removeEventListener("message",onMessage);window.addEventListener("scroll",onScroll);window.addEventListener("wheel",onWheel);window.addEventListener("message",onMessage)});if(window==window.top){chrome.runtime.onMessage.addListener(function(c,b,a){c.lmocspos!=null&&c.lmocspos=="wheel"&&onWheel()})};