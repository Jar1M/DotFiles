$(document).on("ui",function(e,b){var g=b.target;if($("#autofill-notes").length>0){return}var a=[{category:0,label:"Birthdays & Social Security",icon:"fa-birthday-cake"},{category:1,label:"Security Alarm Codes",icon:"fa-shield-check"},{category:2,label:"Operator Codes",icon:"fa-code"},{category:3,label:"Wi-Fi Codes",icon:"fa-wifi"},{category:4,label:"Membership Codes",icon:"fa-id-card-alt"},{category:6,label:"Application Passwords",icon:"fa-router"},{category:7,label:"Appliance Passwords",icon:"fa-browser"},{category:8,label:"Software License",icon:"fa-file-certificate"},{category:9,label:"Personal",icon:"fa-user-circle"},{category:10,label:"Legal",icon:"fa-balance-scale-right"},{category:11,label:"Work",icon:"fa-briefcase"},{category:12,label:"Team & Workgroup",icon:"fa-users-medical"},{category:13,label:"Miscellaneous",icon:"fa-mistletoe"},{category:14,label:"Bank Account",icon:"fa-university"},{category:15,label:"Driving License",icon:"fa-id-card"},{category:16,label:"Medical Insurance",icon:"fa-notes-medical"},{category:17,label:"Passport",icon:"fa-passport"},{category:18,label:"Email Address",icon:"fa-at"},{category:19,label:"Family Matters",icon:"fa-user-friends"},{category:20,label:"School",icon:"fa-bus-school"},{category:21,label:"Children",icon:"fa-child"},];var d=$.grep(a,function(h){return h.category==b.category}).shift();var f=b.sites.length>0?$("<table cellspacing='0' cellpadding='0'>").append($.map(b.sites,function(h){return $("<tr>").append($("<td align='center'>").append($("<div class='icon'>").append(h.icon!=null?$("<img>").attr("src",h.icon):"")),$("<td>").text(h.name),$("<td align='center'>").append($("<a class='more'>").attr("title",translate._("More")).append($("<i class='far fa-ellipsis-h'>")))).sitecontext({site:h,user:b.user,deleted:function(){$("[site="+h.id+"]",c).remove();$("[site]",c).length<=0&&c.dialog("close")},items:[{text:translate._("Fill out"),icon:"far fa-arrow-alt-down",disabled:h.note==null,click:function(){$(this).closest("tr").trigger("click")}},{text:translate._("View Note"),icon:"far fa-sticky-note",disabled:h.note==null,click:function(i){$(this).notesdialog({title:h.name,note:h.note},c)}}]}).attr("site",h.id).attr("title",h.name).data("note",h.note!=null?{id:h.note}:null)})):$("<div class='empty'>").text(translate._("No sites found"));var c=$("<div id='autofill-notes'>").append(b.category==="site"?f:$("<div class='loading-fa'>").append($("<i class='far fa-spinner fa-spin fa-3x'>"))).addClass(b.category==="site"?"select-dialog":"").dialog({title:d!=null?translate._(d.label):translate._("Notes",2),target:g,minWidth:300,maxWidth:600,resizable:false,autoOpen:false,open:function(){!isNaN(b.category)&&$.logmeonce.fireEvent("notes",{category:b.category,decrypt:true}).then(function(h){h=$.grep(h,function(i){return i.body!=null});h.length>0&&c.empty().addClass("select-dialog").append($("<table cellspacing='0' cellpadding='0'>").append($.map(h,function(i){return $("<tr>").append($("<td>").append($("<i class='far fa-fw'>").addClass(d.icon)),$("<td>").append($("<span class='note'>").text(i.title||i.body)),$("<td align='center'>").append($("<a class='more'>").attr("title",translate._("More")).append($("<i class='far fa-ellipsis-h'>")))).contextmenu({items:[{text:translate._("Fill out"),icon:"far fa-arrow-alt-down",click:function(){$(this).closest("tr").trigger("click")}},{text:translate._("View Note"),icon:"far fa-sticky-note",click:function(j){$(this).notesdialog({note:i},c)}}]}).attr("title",i.body).data("note",i.body)})));h.length<=0&&c.empty().append($("<div class='empty'>").text(translate._("No notes found")));c.dialog("option","minHeight",0);$.ui.logmeonce.resize.call(c)},function(h){h.exception!=null&&thiz.text(h.exception.message)})}}).on("click","a.more",function(h){h.preventDefault();h.stopPropagation();$(this).closest(".contextmenu").trigger({type:"contextmenu",position:{my:"right top",at:"right bottom",of:this}})}).on("click","tr",function(){var h=$(this).data("note");h!=null&&$.ui.logmeonce.message({ui:"target",target:g.ui,name:"autofill",autofill:"note",note:h});$(c).dialog("close")});c.dialog("widget").css("visibility","hidden");c.dialog("open");c.dialog("widget").css("visibility","visible")});