$.ajaxPrefilter("script",function(a,c,b){a.cache=true});$(document).on("extension",function(f){var d=f.logmeonce.window(document);d.logmeonce=f.logmeonce;d.translate=f.logmeonce.translate;if(d!=d.parent||d.location.href==logmeonce.server+"newtab"){var a=logmeonce.config.user;var b=a!=null?$.Deferred().resolve(a.license<=1||a.license==100):logmeonce.config.get("offline.ads");b.then(function(e){d.parent.postMessage({newtab:translate._("New Tab"),extension:logmeonce.browser.type,ads:e===true||e==="1"},f.logmeonce.server)})}else{d.document.title=translate._("New Tab")}if(logmeonce.config.user.newtab!=null&&logmeonce.config.user.newtab.engines!=null){$("#search-engines").empty();$.each(logmeonce.config.user.newtab.engines,function(h,j){var g=$("<option>").text(j.name);for(var e in j){g.attr(e,j[e])}$("#search-engines").append(g)})}if(logmeonce.config.user.offline!==true){$("#logged .avatar").prepend($("<img>").attr("src",logmeonce.config.user.pictureUrl))}if(logmeonce.config.brand.logo!=null){$("#logo").replaceWith($("<div class='logo brand'>").append($("<img>").attr("src",logmeonce.config.brand.logo).on("error",function(){logmeonce.domain(logmeonce.config.brand.domain,"brand")}),$("<div class='powered'>").text(translate.company)))}$("#logged span").text(translate.sprintf(translate._("Logged in as %s"),logmeonce.config.user.name));$("#offline").toggle(logmeonce.config.user.offline===true);$("#search .search button").attr("title",translate._("Click to search"));$("#search .search input").attr("placeholder",translate._("Search sites"));$("#homepage").attr("href",logmeonce.server);$("#copyright-years").text("2011-"+new Date().getFullYear());$("#search-input").omnibox().focus();$("#search").filters({init:true,filter:function(g){$("#container").trigger($.extend({type:"render"},g||{}))}});$(".translate").each(function(g,e){if(e.tagName=="INPUT"){$(e).val(translate._($(e).val()))}else{$(e).text(translate._($(e).text()))}});setTimeout(c,0);function c(){$("select:not(.custom, :animated, [multiple], [class*='ui-']):visible").each(function(){var g=$(this);var j=$(this).outerWidth()+"px";var e=$(this).outerHeight()+"px";var h=$(this).css("fontSize");var k=$("<div class='select-container'>").addClass($(this).attr("select-class"));var i=$(this).attr("label")!=null?$(this).attr("label")+": ":"";if(this.style.width!=""){k.css({width:this.style.width})}$(this).addClass("custom").wrap(k).on("click",function(l){if($.browser.safari&&$(this).data("changed")!=null&&new Date().getTime()-$(this).data("changed")>10){$(this).triggerHandler("init")}}).on("change init angular-change",function(l){$(this).data("changed",new Date().getTime()).parent().find("span").text(i+$("option:selected",this).text()).parent().css({width:$(this).outerWidth()+"px"})}).parent().append("<div><span></span></div>").addClass($(this).attr("class-container")).find("div").css({width:j,height:e,lineHeight:e,fontSize:h});$.each(["large","orange","transparent"],function(m,l){g.hasClass("select-"+l)&&g.parent().addClass(l)});if($(this).is(":disabled")){$(this).parent().addClass("disabled")}$(this).triggerHandler("init")});$(".select-container").each(function(){if(!$(this).hasClass("disabled")&&$("select",this).is(":disabled")){$(this).addClass("disabled")}if($(this).hasClass("disabled")&&!$("select",this).is(":disabled")){$(this).removeClass("disabled")}})}logmeonce.config.get("newtab.searchengine").then(function(g){if(g!=null){var e=g.toLowerCase();$("#search-engines option").each(function(){if($(this).attr("name").toLowerCase()==e){$(this).prop("selected",true)}})}$("#search-engines").trigger("change")})}).on("change","#search-engines",function(){var a=$("option:selected",this);if(a.attr("name")!=null&&a.attr("name").length>0){logmeonce.config.set("newtab.searchengine",a.attr("name").toLowerCase())}if(a.is(".buildin-icon")){$(this).next("div").css({backgroundImage:$(a).css("backgroundImage"),backgroundRepeat:$(a).css("backgroundRepeat"),backgroundPosition:$(a).css("backgroundPosition")})}else{$(this).next("div").css({background:"url("+$(a).attr("icon")+") no-repeat 6px center"})}$(this).blur()}).on("render","#container",function(f){var a=f.search;var d=f.groups;var c=this;logmeonce.config.get("sites.sort").then(function(e){return logmeonce.sites(document,{sort:{order:"desc",by:e||"most_used"},search:a,groups:typeof d==="string"&&d.length>0?[{id:!isNaN(d)?parseInt(d):d}]:null,sync:true})}).then(b,null,b);function b(k){var j=k.sites||k;if(a!=null&&a.length>0&&j.length<=0){$(c).empty().append($("<div class='not-found'>").text(translate._("No sites found")+"."))}else{var h=$(c).empty().append("<ul class='icon-view medium'>").children();$.each(j,function(m,l){var e=$("<li>").data("site",l).attr("title",translate._("Click to login")).sitecontext(l).append($("<div class='site-logo'>").css({backgroundImage:"url("+l.image+")"}),$("<div class='label'>").append($("<div class='inner'>").append($("<span>").text(l.name))),$("<a class='more'>").attr("title",translate._("Open Menu")).append($("<i class='fa fa-ellipsis-h'>"))).on("click","a.more",function(i){i.stopPropagation();$(this).closest(".contextmenu").trigger({type:"contextmenu",position:{of:this}})}).on("click",function(i){logmeonce.sso(document,l.id)}).appendTo(h);return m<10-1});for(var g=0;g<5;g++){$("<li class='hidden'>").appendTo(h)}$(".label",h).sitelabel()}}}).on("keyup","#search-input",function(){var a=this.value.toLowerCase();if(this.selectionStart!=null&&this.selectionEnd!=null&&this.selectionStart>0&&this.selectionEnd==this.value.length){a=a.substring(0,this.selectionStart)}$(this).debounce(200,function(){$("#container").trigger({type:"render",search:a})})});$(function(){if(typeof chrome!=="undefined"&&chrome.extension!=null&&chrome.extension.getBackgroundPage!=null){$(document).trigger({type:"extension",logmeonce:chrome.extension.getBackgroundPage().logmeonce.extension(window,chrome)})}else{var b=typeof safari!=="undefined"&&safari.extension!=null?"safari":"chrome";var a=["/components/jquery-1.8.3.min.js","/components/sjcl.js","/content/logmeonce.js","/content/translate.js","/content/tools.js","/content/"+b+"_contentscript.js"];$.each(a,function(f,c){var e=document.getElementsByTagName("head")[0];var d=document.createElement("script");d.src=".."+c;d.async=false;d.setAttribute("format","text/javascript");$("script[src$='"+c+"']").length<=0&&e.appendChild(d)})}});(function(a){a.fn.sitelabel=function(){return a(this).each(function(){var d,c=a(this).text();var e=new RegExp("\\((.*)\\)","g");var b=null;if((b=e.exec(c))!=null){a("span",this).text(d=c.replace(b[0],""));a(this).parent().mouseover(function(){a(".label span",this).text(c)}).mouseout(function(){a(".label span",this).text(d)})}})};a.fn.sitecontext=function(d){var g=logmeonce.config.user.flags&4096;var e=logmeonce.config.user.license>=100;var f=d.privileges==null||logmeonce.allowed(d,"read");var b=d.login.inputs!=null?a.map(d.login.inputs,function(h){if(a.inArray(h.type,["radio","checkbox"])<0&&(f||h.mapping===3)){var i=h.label;if(i==null&&h.flags&2){i=translate._("Username")}if(i==null&&h.flags&4){i=translate._("Password")}if(i==null){i=h.name!=null&&h.name.length>0?h.name:"("+translate._("Empty").toLowerCase()+")"}return{text:translate._("Copy")+" "+i,icon:a("<i class='far fa-copy'>"),click:function(j){a.copyToClipboard({text:logmeonce.decrypt(document,{text:h.value,site:d.id}),passwordViewed:h.type=="password"?d.id:null})}}}}):[];var c=[{text:translate._("Edit"),icon:a("<i class='far fa-edit'>"),click:function(){logmeonce.urlGoto("/dashboard/edit/"+d.id,{newtab:true})}},{text:translate._("Share"),allowed:!e&&d.user==null,disabled:g,title:g?translate._("This feature is available only in Cloud Mode"):null,icon:a("<i class='far fa-share-alt'>"),click:function(){logmeonce.urlGoto("/dashboard/edit/"+d.id+"/#share=true",{newtab:true})}},{text:translate._("Remove Share"),allowed:!e&&d.user!=null&&!d.beneficiary,icon:a("<i class='far fa-share-alt'>"),click:function(){logmeonce.urlGoto("/dashboard/edit/"+d.id+"/#share=remove",{newtab:true})}},{text:translate._("Beneficiary")+" / "+translate._("Heir"),allowed:!e&&d.user==null,disabled:g,title:g?translate._("This feature is available only in Cloud Mode"):null,icon:a("<i class='far fa-child fa-fw'>"),click:function(){logmeonce.urlGoto("/dashboard/edit/"+d.id+"/#beneficiary=true",{newtab:true})}},{text:translate._("Remove Beneficiary"),allowed:!e&&d.user!=null&&!!d.beneficiary,icon:a("<i class='far fa-child fa-fw'>"),click:function(){logmeonce.urlGoto("/dashboard/edit/"+d.id+"/#share=remove",{newtab:true})}},{text:translate._("Delete"),allowed:logmeonce.allowed(d,"delete"),icon:a("<i class='far fa-trash-alt'>"),click:function(){if(confirm(translate._("Remove Confirmation"))){var h=this;logmeonce.deleteSite(document,{site:d.id}).then(function(){a(h).remove();a("#container").trigger("render")},function(i){i!=null&&i.exception!=null&&alert(i.exception.message)})}}}].concat(b.length>0?[{separator:true}].concat(b):[]);return a(this).contextmenu({items:c})};a.parseParams=function(h){var l=/([^&=]+)=?([^&]*)/g;var c=/^(.*)\[[0-9]*?\]$/;var b=function(e){return decodeURIComponent(e.replace(/\+/g," "))};var d={},g,i;if(h){if(h.substr(0,1)=="?"){h=h.substr(1)}while(g=l.exec(h)){var f=b(g[1]);var j=b(g[2]);if(i=c.exec(f)){f=i[1];if(d[f]===undefined){d[f]=[]}}if(d[f]!==undefined){if(!a.isArray(d[f])){d[f]=[d[f]]}d[f].push(j)}else{d[f]=j}}}return d};a.fn.filters=function(b){return this.each(function(){var c=a.extend(true,{},a.fn.filters.defaults,b);var i=a(this);function h(t,q){var r=a(this);var s=r.addClass("opened").parent();var p=a(".filter-panel[filter="+r.attr("filter")+"]",s);if(p.length<=0){p=a("<div class='filter-panel'>").attr("filter",r.attr("filter")).data("filter",r);typeof t==="function"&&t(p);p.appendTo(s)}else{p.addClass("opened").show()}typeof q==="function"&&q(p);p.position({my:"center top",at:"center bottom",of:r})}function l(r){var p=a(this).closest(".filter-panel");var q=p.data("filter");var s=r!=null&&r.text!=null?r.text:"";if(a(this).val().length>0){if(a(this).prop("tagName")=="INPUT"&&a(this).prop("type")=="text"){s=a(this).val()}if(a(this).prop("tagName")=="INPUT"&&a(this).prop("type")=="radio"){s=a(this).parent().text()}if(a(this).prop("tagName")=="INPUT"&&a(this).prop("type")=="checkbox"){s=a(":checkbox:checked",p).map(function(){return a(this).parent().text()}).get().join(", ")}}a("span",q).attr("title",s||q.data("text")).text(s||q.data("text"))}function o(r){var p=a(this).closest(".filter-panel");var q=p.data("filter");l.call(this,r);if(r.filtering){p.addClass("filtering");q.addClass("filtering")}else{q.removeClass("filtering")}r.submit!==false&&r.init!==true&&setTimeout(function(s){typeof c.submit==="function"?c.submit(s):s.submit()},0,q.closest("form"))}function g(r){o.call(this,a.extend({filtering:false},r||{}));if(this.type=="checkbox"){return}var p=a(this).closest(".filter-panel");var q=p.data("filter");p.remove();q.removeClass("opened")}function j(r){o.call(this,a.extend({filtering:true},r||{}));if(this.type=="checkbox"){return}var p=a(this).closest(".filter-panel");var q=p.data("filter");p.hide();q.removeClass("opened")}function f(q){var p=a(this).closest(".filter-panel");if(a(this).is(":checkbox")&&a("input[type=text]",p).length>0&&a(":checkbox:checked",p).length<=0&&a("input[type=text]",p).val().length>0){return o.call(a("input[type=text]",p).get(0),{filtering:true})}if(a(this).is(":checkbox")&&a(":radio",p).length>0){a(":radio",p).prop("checked",a(":checkbox:checked",p).length<=0);if(a(":checkbox:checked",p).length<=0){return g.apply(this)}}a(this).val().length<=0?g.call(this,q):j.call(this,q)}function n(){a(".filter.opened",i).removeClass("opened");a(".filter-panel.filtering",i).hide();a(".filter-panel:not(.filtering)",i).remove()}function k(p,r){if(typeof localStorage==="undefined"||typeof i.attr("id")==="undefined"){return{}}var q=i.attr("id").replace("-search","")+".filters";var t={};try{t=JSON.parse(localStorage.getItem(q))||{}}catch(s){}if(typeof p!=="undefined"){if(typeof r!=="undefined"){if(r!=null){t[p]=r}else{delete t[p]}if(a.isEmptyObject(t)){localStorage.removeItem(q)}else{localStorage.setItem(q,JSON.stringify(t))}}return t[p]}return t}a(window).on("click",function(p){a(p.target).closest(".filter, .filter-panel").length<=0&&a(p.target).closest(document.body).length>0&&n()});var d=a.parseParams(window.location.search);var m=d.filters!=null?a.parseParams(d.filters):undefined;var e=k();if(c.init===true){c.filter(m,{})}if(e.opened===true||m!==undefined){setTimeout(function(){a("a.filters-toggle",i).trigger("init")},0)}if(e.sort===true||e.view===true){setTimeout(function(){e.sort===true&&a("a.toggle[toggle$=sort-option]",i).trigger("init");e.view===true&&a("a.toggle[toggle$=view-option]",i).trigger("init")},0)}a(this).on("submit",function(q){q.preventDefault();var p={};a(this).serializeArray().map(function(r){if(r.value.length<=0){return}if(typeof p[r.name]=="undefined"){p[r.name]=r.value}else{if(typeof p[r.name]=="string"){p[r.name]=[p[r.name],r.value]}else{p[r.name].push(r.value)}}});c.filter(p,q)}).on("init click","a.sidepanel-toggle",function(p){p.preventDefault();c.sidepanel({init:p.type==="init"&&m===undefined,show:a(this).is(".selected")})}).on("mouseleave",".options .hover",function(){a(this).data("hover",false);!a(this).data("clicked")&&a(this).removeClass("hover")}).on("mouseenter",".options .hover",function(){a(this).data("hover",true)}).on("mouseleave",".options a.toggle[toggle]",function(r){var q=a(".options",i);var p=a(this).attr("toggle");setTimeout(function(s){!s.data("hover")&&!s.data("clicked")&&s.removeClass("hover")},100,a(p,q))}).on("mouseenter",".options a.toggle[toggle]",function(r){var q=a(".options",i);var p=a(this).attr("toggle");a(p,q).removeClass("init").addClass("hover")}).on("init click","a.filters-toggle, a.toggle",function(v){v.preventDefault();var r=i.attr("id").replace("-search","");var s=a(".filters",i);var y=a(".options",i);var u=a(this).attr("toggle")!=null?a(this).attr("toggle"):".filter";var w=a(u,s);if(!a(this).hasClass("selected")){a(this).is(":not(.other)")&&a("a.filters-toggle.selected:not(.other), a.toggle.selected:not(.other)",i).not(this).trigger({type:"click"});if(w.length<=0){a(u,y).toggleClass("init",v.type==="init").addClass("visible")}else{if(v.type==="click"){var q=a("<div>").addClass("filter-wrapper").insertBefore(w.first()).append(w);q.css({height:0}).animate({height:w.outerHeight()});w.show().each(function(){a(this).css({left:a(this).position().left})}).css({display:u===".filter"?"inline-block":undefined,position:"absolute",opacity:0,top:-Math.min(40,w.outerHeight()/2)}).animate({opacity:1,top:0},function(){q.replaceWith(w.css({position:"",top:"",left:""}));w.triggerHandler("toggle-opened")})}else{w.show().css({display:u===".filter"?"inline-block":undefined})}}a(this).addClass("selected");var t,x=new RegExp("#"+r+"-(.*)-option","i");v.type==="click"&&u===".filter"&&k("opened",true);v.type==="click"&&(t=x.exec(u))!=null&&k(t[1],true)}else{if(w.length<=0){a(u,y).removeClass("hover").removeClass("visible")}else{var q=a("<div>").addClass("filter-wrapper").insertBefore(w.first()).append(w);q.css({height:w.outerHeight()}).animate({height:0});w.each(function(){a(this).css({left:a(this).position().left})}).css({position:"absolute",opacity:1,top:0}).animate({opacity:0,top:-Math.min(40,w.outerHeight()/2)},function(){q.replaceWith(w.css({position:"",top:"",left:""}).hide());w.triggerHandler("toggle-closed")})}a(this).removeClass("selected");var t,x=new RegExp("#"+r+"-(.*)-option","i");v.type==="click"&&u===".filter"&&k("opened",null);v.type==="click"&&(t=x.exec(u))!=null&&k(t[1],null)}if(u===".filter"&&v.type==="click"){var p=a(".filter-panel input",s).prop("disabled",a(this).hasClass("selected"));p.length>0&&a(this).closest("form").submit()}}).on("keyup","input[name=search]",function(p){c.debouncesearch!==false&&a(this).data("search")!=a(this).val().trim()&&p.keyCode!==13&&a(this).data("search",a(this).val().trim()).debounce(c.debouncesearch,function(){a(this).closest("form").trigger({type:"submit",debounce:true})})}).each(function(q,p){var r=[];a.each(c.filters,function(s,t){a(p).on("click",".filter[filter="+s+"]",function(u){if(a(this).is(".opened")){return a(".filter-panel[filter="+s+"]",i).addClass("opened")}n();t.call(this,{loaded:function(){},open:function(v){return function(){h.apply(v,Array.prototype.slice.call(arguments).slice(typeof arguments[0]==="boolean"?1:0))}}(this),changed:f,hide:j})});r.push(s)});a("[filter]",this).each(function(){var u=a(this);var t=a(this).attr("filter");if(a.inArray(t,r)<0){return a(this).remove()}var v=a(this).text();a(this).attr("title",v).data("text",v).text("").append(a("<span>").text(v));var s;typeof m==="object"&&c.filters[t].call(this,{load:m,loaded:function(w){if(s.is(".opened")){return}if(w.length>0){f.call(w,{init:true})}else{u.removeClass("opened");s.remove()}},open:function(w,x){if(w!==true){return}x(s=a("<div class='filter-panel'>").attr("filter",t).data("filter",u.addClass("opened")).hide());s.appendTo(u.parent())},changed:f,hide:j})})})})};a.fn.filters.defaults={filter:function(){},filters:{groups:function(b,c){b.open(function(e){var f=logmeonce.config.user;var d=[{id:"",name:translate._("All groups")}];if(a.grep(f.sites,function(i){return i.group==null&&i.user==null}).length>0){var g=translate._("Site default group");if(f.license>=100){g=f.owner!=null?translate._("Site personal group"):translate._("Site business group")}d.push({id:"default",name:g})}if(f.owner!=null&&a.grep(f.sites,function(i){return i.group==null&&i.user==f.owner}).length>0){d.push({id:"owner",name:translate._("Site business group")})}if(f.owner==null&&a.grep(f.sites,function(i){return i.user!=null&&!i.beneficiary}).length>0){d.push({id:"shares",name:translate._("Shared with me")})}if(f.owner==null&&a.grep(f.sites,function(i){return i.user!=null&&i.beneficiary}).length>0){d.push({id:"beneficiaries",name:translate._("My Beneficiaries")})}a.each(d.concat(f.groups),function(j,l){var k=logmeonce.sites(document,{groups:[l]});a("<label>").text((l.path||l.name)+(l.id!=null&&l.id!=""?" ("+k.sites.length+")":"")).prepend(a("<input type='radio' name='groups'>").prop("checked",l.id=="").val(l.id)).appendTo(e)});e.on("change","input",b.changed);if(c!=null){e.hide();var h=a("input[value="+c+"]",e).prop("checked",true);b.changed.call(h.length>0?h.get(0):a("input",e).get(0),{submit:false})}})}}};a.fn.omnibox=function(d){var b=function(g,e){if(this.setSelectionRange){this.setSelectionRange(g,e)}else{if(this.createTextRange){var f=this.createTextRange();f.collapse(true);f.moveEnd("character",e);f.moveStart("character",g);f.select()}}};var c=function(h){var f={"188":"44","109":"45","190":"46","191":"47","192":"96","220":"92","222":"39","221":"93","219":"91","173":"45","187":"61","186":"59","189":"45"};var g={"96":"~","49":"!","50":"@","51":"#","52":"$","53":"%","54":"^","55":"&","56":"*","57":"(","48":")","45":"_","61":"+","91":"{","93":"}","92":"|","59":":","39":'"',"44":"<","46":">","47":"?"};var i=h.which;if(f.hasOwnProperty(i)){i=f[i]}if(!h.shiftKey&&(i>=65&&i<=90)){return String.fromCharCode(i+32)}else{if(h.shiftKey&&g.hasOwnProperty(i)){return g[i]}else{return String.fromCharCode(i)}}};return a(this).focus(function(f){if(this.value.length>0){setTimeout(function(e){b.call(e,0,e.value.length)},50,this)}}).keydown(function(j){if(j.keyCode==38||j.keyCode==40){j.preventDefault();var h=a("#suggest-box",document);var g=h.find(".item.selected");var f=h.find(".item").index(g);var i=h.find(".item").removeClass("selected").filter(":eq("+(f+(j.keyCode==40?1:-1))+")").addClass("selected").data("data");if(i!=null){a(this).val(i).data("last",i)}}if(j.keyCode==13){var h=a("#suggest-box",document);var g=h.find(".item.selected");if(g.length>0){j.preventDefault();g.trigger("click")}else{logmeonce.urlGoto(a("select[name=engine]",document).val().replace("%search%",encodeURIComponent(a(this).val())))}}if(this.selectionStart!=null&&this.selectionEnd!=null&&this.selectionStart<this.selectionEnd&&this.value[this.selectionStart]==c(j)){j.preventDefault();b.call(this,this.selectionStart+1,this.selectionEnd)}}).keyup(function(i){var l=this;if(a(this).val().trim().length<=0&&a("#suggest-box",document).length>0){a(this).data("last",null);a("#suggest-box",document).remove();return}if(a(this).val().trim().length>0&&a("#suggest-box",document).length<=0){a("<div id='suggest-box'></div>",document).css({position:"absolute",left:(a(this).parent().offset().left)+"px",top:(a(this).parent().offset().top+a(this).parent().outerHeight()+1)+"px",width:(a(this).parent().innerWidth())+"px"}).on("mousemove",".item",function(){a(this).data("mousemoved",true)}).on("mouseover",".item",function(q){if(a(this).data("mousemoved")!=null){a(this).closest("#suggest-box").find(".selected").removeClass("selected");a(this).addClass("selected").data("data")}}).append("<div id='suggest-history'><div class='header'>History</div></div>").append("<div id='suggest-google'><div class='header'>Search Suggestion</div></div>").appendTo(document.body)}if(i.ctrlKey||a.inArray(i.keyCode,[13,16,17,18,38,40])>=0){return}var n=i.keyCode;var m=this.value.toLowerCase();if(this.selectionStart!=null&&this.selectionEnd!=null&&this.selectionStart>0&&this.selectionEnd==this.value.length){m=m.substring(0,this.selectionStart)}if(i.keyCode==27){a(this).val(m);a("#suggest-box").remove();return}if(a(this).data("last")!=null&&m==a(this).data("last")){return}a(this).data("last",m).data("id",a(this).data("id")+1||0);var o=a("#search-engines option:selected",document).text().replace("&nbsp;","").trim()+" Search";var p=function(e){return function(r,u,t,q,s){u.call(this,m,function(v){if(a(l).data("id")<=e){var w=a(r,document);a(w).find(".item").remove();if(v.length>0){a(w).show();if(t!=null){v.sort(t)}a(v).each(function(x,y){q.call(this,w,y);return x<2});if(a(l).data("id")<=e&&s!=null){s.call(this,w)}}else{a(w).hide()}}})}}(a(this).data("id"));var h=function(q,e){if(q&&!e){return -1}if(!q&&e){return 1}return 0};var k=function(q,e){return h(q.indexOf(m)==0,e.indexOf(m)==0)};var f=function(q,e){return h(q.indexOf(m)>=0,e.indexOf(m)>=0)};var g=function(r){var e=["$","^","*","(",")","+","[","]","{","}","\\","|",".","?","/"];var q=new RegExp("(\\"+e.join("|\\")+")","g");return r.replace(q,"\\$1")};var j=function(q){var e=q.match(/:\/\/(\.)?(.[^/:]+)/i);return e!=null&&e.length>2&&typeof e[2]==="string"&&e[2].length>0?e[2].toLowerCase():null};p("#suggest-history",function(e,q){logmeonce.browser.history(e).then(q)},function(q,e){if(typeof q.host=="undefined"){q.host=j(q.url)}if(typeof e.host=="undefined"){e.host=j(e.url)}var r;if(q.host!=null&&e.host!=null&&(r=k(q.host,e.host))!=0){return r}if(q.host!=null&&e.host!=null&&(r=k(q.host.replace("www.",""),e.host.replace("www.","")))!=0){return r}if(q.title!=null&&e.title!=null&&(r=f(q.title.toLowerCase(),e.title.toLowerCase()))!=0){return r}if(q.host!=null&&e.host!=null&&(r=f(q.host,e.host))!=0){return r}return q.used!=null&&e.used!=null?e.used-q.used:0},function(r,q){var e=new RegExp("("+g(a("<div>").text(m).html())+")","i");a("<div class='item'>",document).append(a("<span class='content title'>",document).text(q.title!=null&&q.title.length>0?q.title:logmeonce.tools.parseUri(q.url).host).html(function(){return a(this).html().replace(e,"<span class='highlight'>$1</span>")}).css({backgroundImage:"url("+(q.icon!=null?q.icon:logmeonce.server+"favicons.php?url="+escape(q.url))+")",backgroundPosition:"1px center",backgroundRepeat:"no-repeat"})).append(a("<span class='url'>",document).text(q.url).html(function(){return a(this).html().replace(e,"<span class='highlight'>$1</span>")})).data("data",q.url).data("url",q.url).click(function(){logmeonce.urlGoto(a(this).data("url"))}).appendTo(r)},function(r){var e;if(n!=8&&(e=a(r).find(".item").get(0))!=null){var q=l.value;var s=a(e).data("url");if(s.indexOf(q)!==0){s=logmeonce.tools.parseUri(s).host}if(s.indexOf(q)!==0){s=s.replace("www.","")}if(s.indexOf(q)===0){if(l.value!=s){l.value=s;b.call(l,q.length,s.length)}a(e).addClass("selected")}}});p("#suggest-google",function(e,q){a.ajax({url:"https://suggestqueries.google.com/complete/search",data:{output:"toolbar",q:e},dataType:"xml"}).then(function(s){var r=[];a(s).find("suggestion").each(function(u,t){a(t).attr("data")!=null&&r.push(a(t).attr("data"))});q.call(logmeonce,r)})},null,function(r,q){var e=new RegExp("("+g(a("<div>").text(m).html())+")","i");a("<div class='item'>",document).append(a("<span class='content'>",document).text(q+" - ").html(function(){return a(this).html().replace(e,"<span class='highlight'>$1</span>")}).css({backgroundImage:a("#search-engines",document).css("backgroundImage"),backgroundPosition:"1px center",backgroundRepeat:"no-repeat"}).append(a("<span class='grey'>",document).text(o))).data("data",q).click(function(){a(l).val(a(this).data("data"));logmeonce.urlGoto(a("select[name=engine]",document).val().replace("%search%",encodeURIComponent(a(l).val())))}).appendTo(r)})}).blur(function(){setTimeout(function(){a("#suggest-box",document).remove()},200)})}})(jQuery);